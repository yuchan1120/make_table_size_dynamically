<script>
function addId() {
    var elements = document.getElementsByClassName( "text_field" ) ;
    console.log(elements);
    elements = [].slice.call( elements ) ;
    elements.forEach((element, index) => {
        element.setAttribute("id", "cell" + index);
    });
}

/**
 * 行追加
 */
function insertRow(target) {
    var elements = document.getElementsByTagName( "tr" ) ;

    // 番号を知りたい要素
    var element = target.parentNode.parentNode;

    // HTMLCollectionから配列を作成
    elements = [].slice.call( elements ) ;

    // 要素の順番を取得
    var index = elements.indexOf( element ) ;
    // テーブル取得
    var table = document.getElementById('sample1_table');
    // 下に1行挿入
    var row = table.insertRow(index + 1);
    // セルの挿入
    var cell1 = row.insertCell(-1);
    var cell2 = row.insertCell(-1);
    var cell3 = row.insertCell(-1);
    var cell4 = row.insertCell(-1);
    // ボタン用 HTML
    var add_button = '<input type="button" value="下に1行挿入" onclick="insertRow(this)" />';
    var delete_button = '<input type="button" value="行削除" onclick="deleteRow(this)" />';

    // 行数取得
    var row_len = table.rows.length;

    const input1 = document.createElement("input");
    input1.setAttribute("list", "regular_work");
    input1.setAttribute("class", "text_field");
    input1.setAttribute("type", "text");
    input1.setAttribute("name", "table[" + index + 2 + "-" + 1 + "]");
    input1.setAttribute("id", "table_" + row_len + "-" + 1);
    input1.setAttribute("value", index + 2 + "-" + 1);

    // セルの内容入力
    cell1.innerHTML = add_button;
    cell2.innerHTML = delete_button;
    cell3.appendChild(input1);
    cell4.innerHTML = row_len + "-" + 2;
}

/**
 * 行削除
 */
function deleteRow(obj) {
    // 削除ボタンを押下された行を取得
    tr = obj.parentNode.parentNode;
    // trのインデックスを取得して行を削除する
    tr.parentNode.deleteRow(tr.sectionRowIndex);
}
</script>

<input type="button" value="行追加" onclick="addId()" />
<table id="sample1_table">
    <tr id="tr_1">
        <td><input type="button" value="下に1行挿入" onclick="insertRow(this)" /></td>
        <td nowrap><input type="button" value="行削除" onclick="deleteRow(this)" /></td>
        <td nowrap class="text_field">1-1</td>
        <td nowrap class="text_field">1-2</td>
    </tr>
</table>
